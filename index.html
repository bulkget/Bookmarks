<!doctype html><meta charset="utf-8">
<title>FB Test</title>
<pre id="out">starting…</pre>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-database.js";

const out = (m)=>document.getElementById('out').textContent += "\n"+m;

// <<< ใส่ config จริงของคุณที่นี่ >>>
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "bookmarks-c2ec7.firebaseapp.com",
  databaseURL: "https://bookmarks-c2ec7-default-rtdb.firebaseio.com",
  projectId: "bookmarks-c2ec7",
  appId: "YOUR_APP_ID"
};

try{
  const app = initializeApp(firebaseConfig);
  out("app init OK");
  const auth = getAuth(app);
  const db   = getDatabase(app);

  signInAnonymously(auth).catch(e=>out("signIn error: "+e.code+" / "+e.message));

  onAuthStateChanged(auth, async (user)=>{
    if(!user){ out("no user"); return; }
    out("signed in uid="+user.uid);
    try{
      await set(ref(db, "ping/"+user.uid), { ts: Date.now() });
      out("write OK");
    }catch(e){ out("write error: "+e.code+" / "+e.message); }
  });
}catch(e){
  out("init error: "+e.message);
}
</script>
